name: Setup UV with Cache
description: Checkout, cache and install using uv.
runs:
  using: composite
  steps:
    - name: install uv
      uses: astral-sh/setup-uv@v5
      with:
        version: "0.5.20"

    - uses: actions/checkout@v4

    - uses: actions/cache@v4
      with:
        path: |
          .venv
          .uv
        key: uv-${{ runner.os }}-${{ hashFiles('**/pyproject.toml', '**/uv.lock') }}
        restore-keys: |
          uv-${{ runner.os }}-

    - run: uv pip install -e .
      shell: bash
